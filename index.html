<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INNOVATION 2026 | CINEMATIC AUTO-SHOWCASE</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@200;400;700&family=Rajdhani:wght@500;700&family=Kanit:wght@300;600;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #000000;
            --accent-cyan: #00f2ff;
            --poster-h: 75vh;
            --poster-w: calc(var(--poster-h) * 0.7);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--bg-dark); color: white; font-family: 'Kanit', sans-serif; overflow: hidden; width: 100vw; height: 100vh; }

        /* หน้าจอเริ่มต้น */
        #start-screen {
            position: fixed; inset: 0; background: var(--bg-dark); z-index: 1000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        #viewport {
            position: relative; width: 100%; height: 100%;
            display: flex; align-items: center; opacity: 0; z-index: 5;
        }

        #poster-track {
            display: flex; gap: 80px; padding: 0 50vw; will-change: transform;
        }

        .poster-card {
            flex-shrink: 0; width: var(--poster-w); height: var(--poster-h);
            background: #111; border: 2px solid rgba(255,255,255,0.1);
            position: relative; transition: border-color 0.8s, box-shadow 0.8s;
            box-shadow: 0 10px 40px rgba(0,0,0,0.8);
        }

        .poster-card.is-active {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 50px rgba(0, 242, 255, 0.4);
            z-index: 10;
        }

        .poster-card img { width: 100%; height: 100%; object-fit: contain; }

        /* ปุ่มควบคุมแบบใส */
        .nav-control {
            position: fixed; top: 0; bottom: 0; width: 12vw;
            display: flex; align-items: center; justify-content: center;
            z-index: 100; cursor: pointer; background: transparent;
            border: none; outline: none; transition: background 0.4s;
        }
        .nav-control:hover { background: rgba(0, 242, 255, 0.03); }
        .nav-control svg { width: 45px; fill: white; opacity: 0.15; transition: 0.3s; }
        .nav-control:hover svg { opacity: 0.8; fill: var(--accent-cyan); scale: 1.2; }
        .prev-btn { left: 0; }
        .next-btn { right: 0; }

        .hud-ui {
            position: fixed; top: 40px; left: 40px; font-family: 'Rajdhani';
            color: var(--accent-cyan); letter-spacing: 3px; font-size: 14px; z-index: 50;
            text-transform: uppercase;
        }

        #outro {
            position: fixed; inset: 0; background: black; z-index: 500;
            display: none; align-items: center; justify-content: center; flex-direction: column;
            opacity: 0;
        }
    </style>
</head>
<body>

    <audio id="bgm" loop crossorigin="anonymous"></audio>
    
    <div id="start-screen">
        <div style="font-family: 'Rajdhani'; color: var(--accent-cyan); margin-bottom: 20px; letter-spacing: 8px; font-size: 1.2rem;">SYSTEM_READY</div>
        <button onclick="bootSystem()" style="padding: 12px 40px; background: none; border: 1px solid var(--accent-cyan); color: white; cursor: pointer; font-family: 'Kanit'; letter-spacing: 2px; transition: 0.3s;">
            START AUTOMATIC SHOWCASE
        </button>
    </div>

    <button class="nav-control prev-btn" onclick="manualStep(-1)">
        <svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
    </button>
    <button class="nav-control next-btn" onclick="manualStep(1)">
        <svg viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
    </button>

    <div class="hud-ui" id="hud">STATUS: IDLE</div>

    <div id="viewport">
        <div id="poster-track"></div>
    </div>

    <div id="outro">
        <h1 style="font-size: 4.5rem; font-family: 'Rajdhani'; color: white; letter-spacing: 15px;">FINISH</h1>
        <div style="width: 100px; height: 2px; background: var(--accent-cyan); margin: 20px 0;"></div>
        <p style="color: var(--accent-cyan); letter-spacing: 5px; font-size: 1.2rem;">วิทยาลัยเทคนิคอำนาจเจริญ</p>
    </div>

    <script>
        const posters = [
            "https://image2url.com/r2/default/files/1770270328767-4f665d1c-74e9-4ae6-b0c2-7f372a21abaf.png",
            "https://image2url.com/r2/default/files/1770275641316-44e314b2-6431-49d3-aab6-a67617edaa25.png",
            "https://image2url.com/r2/default/files/1770270350191-9044493b-483f-495c-9c6a-178b44f0df68.png",
            "https://image2url.com/r2/default/files/1770271583761-fc0daa93-045e-458a-a349-601e469c6c55.png",
            "https://image2url.com/r2/default/files/1770278426552-d66b5a92-4c38-4729-86bc-76363cf139d8.png",
            "https://image2url.com/r2/default/files/1770271649022-acfec717-4bb7-4f08-8337-7864cb700977.png",
            "https://image2url.com/r2/default/files/1770271787974-4eca9685-14c2-4e76-9516-d51acb07036f.png",
            "https://image2url.com/r2/default/files/1770271685605-e6944e59-794a-4024-851d-2a18ca0a2b49.png",
            "https://image2url.com/r2/default/files/1770271692165-9669c1da-888a-4388-b716-daa1d105182c.png",
            "https://image2url.com/r2/default/files/1770278221988-d0665551-c23f-43ec-9d06-9413aa45119a.png",
            "https://image2url.com/r2/default/files/1770271707904-b2988bfb-bdc3-4a29-b55d-a4cbc52f2396.png"
        ];

        const audioUrl = "https://image2url.com/r2/default/videos/1770188444874-800b8249-5b6e-4bce-b759-cc0a1002957a.mp4";
        const track = document.getElementById('poster-track');
        let currentIdx = -1; 
        let mainTl;
        let autoResumeTimer;

        // สร้าง Card โปสเตอร์ทั้งหมด
        posters.forEach((url, i) => {
            const card = document.createElement('div');
            card.className = 'poster-card';
            card.id = `card-${i}`;
            card.innerHTML = `<img src="${url}">`;
            track.appendChild(card);
        });

        function bootSystem() {
            document.getElementById('start-screen').remove();
            gsap.to("#viewport", { opacity: 1, duration: 2 });
            
            const bgm = document.getElementById('bgm');
            bgm.src = audioUrl;
            bgm.volume = 0.4;
            bgm.play().catch(() => {});

            startAutoCycle();
        }

        function startAutoCycle() {
            if (mainTl) mainTl.kill();
            mainTl = gsap.timeline();

            // STEP 1: CINEMATIC OVERVIEW (ช้าลงพิเศษ)
            document.getElementById('hud').innerText = "STATUS: SCANNING_GALLERY_SLOW";
            
            // เลื่อนไปจนสุด (15 วินาที เพื่อความละเมียดละไม)
            mainTl.to(track, { 
                x: () => -(track.scrollWidth - window.innerWidth), 
                duration: 15, 
                ease: "power1.inOut" 
            });
            
            // รอที่จุดจบ 1 วินาทีแล้วค่อยดึงกลับมาช้าๆ
            mainTl.to(track, { x: 0, duration: 4, ease: "expo.inOut" }, "+=1");

            // STEP 2: AUTO FOCUS EACH POSTER
            posters.forEach((_, i) => {
                mainTl.add(() => focusOn(i), "+=0.5");
                mainTl.to({}, { duration: 5 }); // แต่ละใบโชว์ 5 วินาที
            });

            // STEP 3: FINISH & RESTART
            mainTl.add(() => {
                document.getElementById('outro').style.display = 'flex';
                gsap.to("#outro", { opacity: 1, duration: 1.5 });
            });
            mainTl.to({}, { duration: 5 });
            mainTl.add(() => {
                gsap.to("#outro", { opacity: 0, duration: 1, onComplete: () => {
                    document.getElementById('outro').style.display = 'none';
                    startAutoCycle(); // วนลูปกลับไปเริ่มใหม่
                }});
            });
        }

        function focusOn(index) {
            if (index < 0 || index >= posters.length) return;
            currentIdx = index;

            const cardWidth = document.querySelector('.poster-card').offsetWidth;
            const gap = 80;
            const targetX = -( (cardWidth + gap) * index );

            document.getElementById('hud').innerText = `SHOWCASING: ${index + 1} OF ${posters.length}`;

            // เลื่อนกล้อง
            gsap.to(track, { x: targetX, duration: 2, ease: "expo.out" });

            // ปรับสถานะการมองเห็น (ชัดทุกใบ แต่ใบที่เลือกจะเด่นขึ้น)
            document.querySelectorAll('.poster-card').forEach((el, i) => {
                if (i === index) {
                    el.classList.add('is-active');
                    gsap.to(el, { scale: 1.1, opacity: 1, duration: 1 });
                } else {
                    el.classList.remove('is-active');
                    gsap.to(el, { scale: 0.9, opacity: 0.5, duration: 1 });
                }
            });
        }

        function manualStep(direction) {
            // หยุดระบบออโต้ชั่วคราว
            mainTl.pause();
            clearTimeout(autoResumeTimer);

            let target = currentIdx + direction;
            if (target < 0) target = 0;
            if (target >= posters.length) target = posters.length - 1;

            focusOn(target);

            // หากไม่มีการกดปุ่มภายใน 8 วินาที จะรันออโต้ต่อจากจุดนี้
            autoResumeTimer = setTimeout(() => {
                mainTl.play();
            }, 8000);
        }
    </script>
</body>
</html>
